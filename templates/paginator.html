<div class="pagination pagination-centered">
    <ul>
        {% if maxPage > 6 -%}
            {% set subtractor = 0 -%}

            {% if page == 1 -%}
                {% set subtractor = -3 -%}
            {% endif -%}

            {% if page == 2 -%}
                {% set subtractor = -2 -%}
            {% endif -%}

            {% if page == 3 -%}
                {% set subtractor = -1 -%}
            {% endif -%}

            {% if page == 4 -%}
                {% set subtractor =  0 -%}
            {% endif -%}


            {% if page == maxPage -%}
                {% set subtractor = +3 -%}
            {% endif -%}

            {% if page == maxPage - 1 -%}
                {% set subtractor = +2 -%}
            {% endif -%}

            {% if page == maxPage - 2 -%}
                {% set subtractor = +1 -%}
            {% endif -%}

            {% if page == maxPage - 3 -%}
                {% set subtractor = +0 -%}
            {% endif -%}


            {% if page > 1 -%}
            <li><a onclick="sendQuery(1)">&lt&lt</a></li>
            <li><a onclick="sendQuery({{ page - subtractor - 4 }})">-4</a></li>
            {% else -%}
            <li class="disabled"><a>&lt&lt</a></li>
            <li class="disabled"><a>Prev</a></li>
            {% endif -%}



            {% set initValue = (page - subtractor -3) -%}
            {% for val in range(initValue, (initValue + 7))-%}
                {% set active = "" -%}
                {% set bar    = "" -%}
                {% set total  = "" -%}
                {% if val == page -%}
                    {% set active = ' class="active"'-%}
                    {% set bar    = "/" -%}
                    {% set total  = maxPage -%}
                {% endif -%}
            <li{{ active|safe }}><a onclick="sendQuery({{ val }})">{{ val }}{{ bar }}{{ total }}</a></li>
            {% endfor -%}



            {% if page == maxPage -%}
            <li class="disabled"><a>Next</a></li>
            <li class="disabled"><a>&gt&gt</a></li>
            {% else -%}
            <li><a onclick="sendQuery({{ page - subtractor + 4 }})">+4</a></li>
            <li><a onclick="sendQuery({{ maxPage }})">&gt&gt</a></li>
            {% endif -%}
        {% else -%}
            {% for val in range(1, maxPage + 1)-%}
                {% set active = "" -%}
                {% set bar    = "" -%}
                {% set total  = "" -%}
                {% if val == page -%}
                    {% set active = ' class="active"'-%}
                    {% set bar    = "/" -%}
                    {% set total  = maxPage -%}
                {% endif -%}
            <li{{ active|safe }}><a onclick="sendQuery({{ val }})">{{ val }}{{ bar }}{{ total }}</a></li>
            {% endfor -%}
        {% endif -%}
    </ul>
</div>
